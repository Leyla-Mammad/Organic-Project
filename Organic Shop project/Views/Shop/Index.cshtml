@using Organic_Shop_project.ViewModels.Shop;
@model ShopIndexViewModel;



<section style="background-color: rgb(254, 248, 240); padding: 40px; margin: 30px;">
    <div class="container" style="display:flex; ">
        <div class="row" style="display:block;">

            <div  style="border: 1px solid black; padding:30px 20px;">

                <div class="Filter">
                    <form method="get" class="example" asp-controller="Shop" asp-action="Index">
                  
                        <div class="form-group">
                            <input asp-for="@Model.Name" placeholder="Search..">
                            <span asp-validation-for="@Model.Name" class="text-danger"></span>
                             <button style="color: #ffffff; background-color: #0b9710; border: none;" type="submit"><i class="fa fa-search"></i></button>

                        </div>
                      <div>
                           <div>
                    <h3 style="margin:20px 0;">Filter by Price</h3>
                </div>
                           <div class="d-flex"  >
                                <div class="form-group">
                            <input asp-for="@Model.MinPrice" style="width:50px; margin:0 5px ;" placeholder="10£">
                        </div
                        <div class="form-group ml-3">
                            <input asp-for="@Model.MaxPrice" style="width:50px; margin: 0 5px;" placeholder="40£">
                        </div>
                           </div>
                      
                      </div>
                        <button class="btn btn-outline-primary" style="background-color:green; color:white;border:1px solid green;margin:20px 0;">Submit</button>
                 </form> 
                    
                
                </div>
                <div style=" padding: 50px 0; margin-left:20px; width:30%;" class="col-">
                    <h3 style="margin:0 0 20px 0;">Product Categories</h3>
                    @{
                        foreach (var categories in Model.Categories)
                        {
                                    <div>
                                        <a style="color: #0b9710; font-size: 18px; " data-filter="@categories.Title"
                                           href="#"><i style="padding-right: 10px;" class="fa-solid fa-utensils"></i><span>@categories.Title</span></a>
                                    </div>
                        }
                    }
                </div>

            </div>

            <div class="col-lg-8">
                <a style="color: black;" href="index.html">Home</a>
                <span>/ Shop</span>
                <h1 style="color: #0b9710; margin: 20px 0; font-size: 50px;">SHOP</h1>
                
                <div class=" d-flex justify-content-around" style="flex-wrap:wrap;">
                         
                                @{
                                    foreach(var categoryComponent in Model.Components)
                                    {
                                        <a style="text-align:center;">
                                                   <tr class="col-lg-4 text-align-center">
                                                  
                                                  <td> <div>
                                                   
                                                   <span style="float:right; color:white;background-color: green; border:1px solid green;position:absolute; border-radius:50%; padding:2px; margin: 5px 0 0 5px !important; z-index:100;">@categoryComponent.status</span>
                                                   <img style="width:250px;height:250px;object-fit:cover; z-index:99; position:relative;" class="img-thumbnail" src="~/src/img/@categoryComponent.FilePath" />
                                                   </div>
                                                   </td>

                                                <td><h6 style="font-weight:300;font-size:13px;">@categoryComponent.Category.Title</h6></td>

                                                <td><h5 style="font-size:17px;" >@categoryComponent.Name</h5></td>
                                                <td>
                                                    <h6 style="color:green; font-weight:700;">
                                                        <span class="woocommerce-Price-currencySymbol">£</span>
                                                        <span>@categoryComponent.Price</span>
                                                    </h6>
                                                </td>
                                                 </tr>
                                                <button class="addBasketBtn" data-id="@categoryComponent.Id" style="background-color:green; color:white; border: 1px solid green;"><i style="margin: 0  5px 0 0" class="fa-solid fa-cart-plus"></i>Add to Cart</button>
                                              


                                                 <div class="dropdown " style="width:1200px !important; height: 700px !important">
                                                 <img>
                                                 <h3>@categoryComponent.Name</h3>
                                                 <span class="woocommerce-Price-currencySymbol">£</span><h5>@categoryComponent.Price</h5><span >+Free Shipping</span>
                                                 <h6>@categoryComponent.Description</h6>
                                                 <button>@categoryComponent.Quantity</button>
                                                 
                                                 </div>  </a>
                                         }
                                }

                                
                                
                            </div>
                               
               
            </div>



        </div>
    </div>

</section>



                               @section Scripts{
                                   <script src="~/src/js/Basket.js"></script>
                                   <script type="text/javascript">

    
let img_thumb = document.querySelectorAll(".img-thumbnail")
let dropdown = document.querySelectorAll(".dropdown");


                                       img_thumb.forEach((elem) => {
                                           elem.addEventListener("click", (e) => {
                                               e.target.parentElement.parentElement.querySelectorAll('.dropdown')[0].classList.toggle("active")
                                           })
                                       })
// document.body.addEventListener("click", function (event) {
//     if ( !img_thumb.contains(event.target) && !dropdown.contains(event.target)) {
//     dropdown.classList.remove("active");
//     }
//   });

</script>
                               }